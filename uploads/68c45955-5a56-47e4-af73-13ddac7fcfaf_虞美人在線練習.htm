<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è™ç¾äººåœ¨ç·šç·´ç¿’å››</title>
    <style>
        body {
            font-family: "Microsoft YaHei", "SimSun", serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            border-bottom: 2px solid #333;
            padding-bottom: 15px;
            margin-bottom: 25px;
        }
        
        .header h1 {
            font-size: 24px;
            color: #333;
            margin: 0;
        }
        
        .score-display {
            text-align: right;
            font-weight: bold;
            margin-bottom: 20px;
            font-size: 16px;
            color: #007acc;
        }
        
        .instruction {
            background-color: #f5f5f5;
            padding: 15px;
            border-left: 4px solid #007acc;
            margin-bottom: 25px;
            font-size: 14px;
        }
        
        .poem {
            background-color: #fafafa;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 18px;
            line-height: 2;
        }
        
        .poem .content {
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .poem .author {
            font-style: italic;
            color: #666;
            font-size: 16px;
        }
        
        .notes {
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            padding: 15px;
            margin: 20px 0;
            font-size: 14px;
        }
        
        .notes h3 {
            margin-top: 0;
            color: #333;
            font-size: 16px;
        }
        
        .question {
            margin: 25px 0;
            padding: 15px;
            border-left: 3px solid #007acc;
            background-color: #fafafa;
        }
        
        .question-number {
            font-weight: bold;
            font-size: 16px;
            color: #007acc;
            margin-bottom: 10px;
        }
        
        .sub-question {
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .input-field {
            border: 2px solid #ddd;
            padding: 8px 12px;
            font-size: 14px;
            border-radius: 4px;
            min-width: 150px;
            font-family: inherit;
            transition: border-color 0.3s;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #007acc;
        }
        
        .input-field.correct {
            border-color: #28a745;
            background-color: #d4edda;
        }
        
        .input-field.incorrect {
            border-color: #dc3545;
            background-color: #f8d7da;
        }
        
        .points {
            color: #666;
            font-weight: bold;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        table, th, td {
            border: 1px solid #333;
        }
        
        th, td {
            padding: 12px;
            text-align: center;
            vertical-align: middle;
        }
        
        th {
            background-color: #f5f5f5;
            font-weight: bold;
        }
        
        .options {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .option {
            margin: 8px 0;
            padding: 8px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .option:hover {
            background-color: #e9ecef;
        }
        
        .option input[type="radio"] {
            margin-right: 8px;
        }
        
        .option.correct {
            background-color: #d4edda;
            border: 2px solid #28a745;
        }
        
        .option.incorrect {
            background-color: #f8d7da;
            border: 2px solid #dc3545;
        }
        
        .bold {
            font-weight: bold;
        }
        
        .separator {
            border-top: 1px solid #ccc;
            margin: 25px 0;
        }
        
        .control-buttons {
            text-align: center;
            margin: 30px 0;
        }
        
        .btn {
            background-color: #007acc;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #005a9e;
        }
        
        .btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background-color: #6c757d;
        }
        
        .btn-secondary:hover {
            background-color: #545b62;
        }
        
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .feedback.excellent {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback.good {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .feedback.needs-improvement {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .feedback.poor {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .hidden {
            display: none;
        }
        
        .result-summary {
            background-color: #e8f4fd;
            border: 1px solid #b3d9ff;
            padding: 20px;
            margin-top: 20px;
            border-radius: 5px;
        }
        
        .result-summary h3 {
            color: #0066cc;
            margin-top: 0;
        }
        
        .student-info {
            background-color: #f8f9fa;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        
        .student-info input {
            margin: 5px 10px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        
        @media print {
            .control-buttons, .student-info {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>è™ç¾äººåœ¨ç·šç·´ç¿’å››</h1>
        </div>
        
        <div class="student-info">
            <label>å­¸ç”Ÿå§“åï¼š<input type="text" id="studentName" placeholder="è«‹è¼¸å…¥æ‚¨çš„å§“å"></label>
            <label>ç­ç´šï¼š<input type="text" id="studentClass" placeholder="è«‹è¼¸å…¥ç­ç´š"></label>
            <label>å­¸è™Ÿï¼š<input type="text" id="studentId" placeholder="è«‹è¼¸å…¥å­¸è™Ÿ"></label>
        </div>
        
        <div class="score-display">
            ç¸½åˆ†ï¼š18åˆ† | ç•¶å‰å¾—åˆ†ï¼š<span id="currentScore">0</span>åˆ† | å®Œæˆé€²åº¦ï¼š<span id="progress">0</span>%
        </div>
        
        <div class="instruction">
            è©¦è¾¨è­˜ä»¥ç²—é»‘é«”æ¨™ç¤ºçš„å¥å­é‹ç”¨äº†å“ªç¨®ä¿®è¾­æ‰‹æ³•ï¼Œä¸¦å®Œæˆé–±è®€ç†è§£é¡Œç›®ã€‚ï¼ˆå¦‚ä¿®è¾­æ‰‹æ³•å¯ç´°åˆ†ç‚ºä¸åŒé¡åˆ¥ï¼Œç­”æ¡ˆå¿…é ˆè¨»æ˜å…¶åˆ†é¡ï¼Œå¦‚æ˜å–»ã€æš—å–»ã€åè¥¯ç­‰ï¼‰
        </div>
        
        <div class="poem">
            <div class="content">
                <span class="bold">æ˜¥èŠ±ç§‹æœˆä½•æ™‚äº†ï¼Ÿå¾€äº‹çŸ¥å¤šå°‘ï¼å°æ¨“æ˜¨å¤œåˆæ±é¢¨ï¼Œæ•…åœ‹ä¸å ªå›é¦–æœˆæ˜ä¸­ï¼</span><br><br>
                <span class="bold">é›•é—Œç‰ç Œæ‡‰çŒ¶åœ¨ï¼Œåªæ˜¯æœ±é¡æ”¹ã€‚å•å›èƒ½æœ‰å¹¾å¤šæ„ï¼Ÿæ°ä¼¼ä¸€æ±Ÿæ˜¥æ°´å‘æ±æµï¼</span>
            </div>
            <div class="author">ï¼ˆæç…œã€Šè™ç¾äººã€‹ï¼‰</div>
        </div>
        
        <div class="notes">
            <h3>ã€è¨»é‡‹ã€‘</h3>
            (1) æ˜¥èŠ±ç§‹æœˆï¼šæŒ‡ç¾å¥½çš„æ™‚å…‰ã€‚(2) æ•…åœ‹ï¼šæŒ‡å—å”ã€‚(3) é›•é—Œç‰ç Œï¼šé›•åˆ»çš„æ¬„æ†ï¼Œç‰çŸ³ç Œæˆçš„è‡ºéšï¼ŒæŒ‡æ˜”æ—¥å®®æ®¿çš„è¯éº—ã€‚(4) æœ±é¡ï¼šç´…æ½¤çš„é¢å®¹ï¼Œé€™è£¡æŒ‡é’æ˜¥å¹´è¯ã€‚
        </div>
        
        <div class="separator"></div>
        
        <div class="question">
            <div class="question-number">1. ä¿®è¾­æ‰‹æ³•è¾¨è­˜é¡Œ</div>
            <div class="sub-question">
                â‘  <span class="bold">ã€Œæ•…åœ‹ä¸å ªå›é¦–æœˆæ˜ä¸­ã€</span>ä¸€å¥ç”¨äº†
                <input type="text" class="input-field" id="q1a" placeholder="è«‹å¡«å…¥ä¿®è¾­æ‰‹æ³•">
                ä¿®è¾­æ‰‹æ³•ã€‚<span class="points">ï¼ˆ2åˆ†ï¼‰</span>
            </div>
            <div class="sub-question">
                â‘¡ <span class="bold">ã€Œæ°ä¼¼ä¸€æ±Ÿæ˜¥æ°´å‘æ±æµã€</span>ä¸€å¥ç”¨äº†
                <input type="text" class="input-field" id="q1b" placeholder="è«‹å¡«å…¥ä¿®è¾­æ‰‹æ³•">
                ä¿®è¾­æ‰‹æ³•ã€‚<span class="points">ï¼ˆ2åˆ†ï¼‰</span>
            </div>
            <div class="sub-question">
                â‘¢ <span class="bold">ã€Œå•å›èƒ½æœ‰å¹¾å¤šæ„ã€</span>ä¸€å¥ç”¨äº†
                <input type="text" class="input-field" id="q1c" placeholder="è«‹å¡«å…¥ä¿®è¾­æ‰‹æ³•">
                ä¿®è¾­æ‰‹æ³•ã€‚<span class="points">ï¼ˆ2åˆ†ï¼‰</span>
            </div>
        </div>
        
        <div class="separator"></div>
        
        <div class="question">
            <div class="question-number">2. æœ¬è©åœ¨æ™‚é–“å±¤æ¬¡ä¸Šè²«ç©¿ä»Šæ˜”ï¼Œå¯åˆ†ç‚ºä¸‰éƒ¨åˆ†ï¼Œè©¦æ‘˜éŒ„ç›¸é—œè©å¥ï¼Œå®Œæˆä¸‹è¡¨ã€‚<span class="points">ï¼ˆ6åˆ†ï¼‰</span></div>
            
            <table>
                <tr>
                    <th>éƒ¨åˆ†</th>
                    <th>è©å¥ç¯„åœ</th>
                    <th>å…§å®¹</th>
                </tr>
                <tr>
                    <td>ç¬¬ä¸€éƒ¨åˆ†</td>
                    <td>
                        <input type="text" class="input-field" id="q2a1" placeholder="èµ·å§‹å¥" style="width: 120px;">
                        è‡³
                        <input type="text" class="input-field" id="q2a2" placeholder="çµæŸå¥" style="width: 120px;">
                    </td>
                    <td>æ„Ÿå˜†æ™‚å…‰æµé€<br><span class="points">ï¼ˆ2åˆ†ï¼‰</span></td>
                </tr>
                <tr>
                    <td>ç¬¬äºŒéƒ¨åˆ†</td>
                    <td>
                        <input type="text" class="input-field" id="q2b1" placeholder="èµ·å§‹å¥" style="width: 120px;">
                        è‡³
                        <input type="text" class="input-field" id="q2b2" placeholder="çµæŸå¥" style="width: 120px;">
                    </td>
                    <td>å›æ†¶æ˜”æ—¥ç¾å¥½<br><span class="points">ï¼ˆ2åˆ†ï¼‰</span></td>
                </tr>
                <tr>
                    <td>ç¬¬ä¸‰éƒ¨åˆ†</td>
                    <td>
                        <input type="text" class="input-field" id="q2c1" placeholder="èµ·å§‹å¥" style="width: 120px;">
                        è‡³
                        <input type="text" class="input-field" id="q2c2" placeholder="çµæŸå¥" style="width: 120px;">
                    </td>
                    <td>æŠ’ç™¼ç¾å¯¦ä¹‹æ„<br><span class="points">ï¼ˆ2åˆ†ï¼‰</span></td>
                </tr>
            </table>
        </div>
        
        <div class="separator"></div>
        
        <div class="question">
            <div class="question-number">3. å…¨è©çš„ä¸»æ—¨æ˜¯ï¼š<span class="points">ï¼ˆ2åˆ†ï¼‰</span></div>
            <div class="options">
                <div class="option" onclick="selectOption('q3', 'A')">
                    <input type="radio" name="q3" value="A" id="q3A">
                    <label for="q3A">A. è¡¨é”å°æ„›äººçš„æ€å¿µã€‚</label>
                </div>
                <div class="option" onclick="selectOption('q3', 'B')">
                    <input type="radio" name="q3" value="B" id="q3B">
                    <label for="q3B">B. æ„Ÿå˜†æ™‚å…‰æ˜“é€ï¼Œé’æ˜¥ä¸å†ã€‚</label>
                </div>
                <div class="option" onclick="selectOption('q3', 'C')">
                    <input type="radio" name="q3" value="C" id="q3C">
                    <label for="q3C">C. æŠ’ç™¼äº¡åœ‹ä¹‹ç—›å’Œæ·±æ²‰æ„æ€ã€‚</label>
                </div>
                <div class="option" onclick="selectOption('q3', 'D')">
                    <input type="radio" name="q3" value="D" id="q3D">
                    <label for="q3D">D. æå¯«æ˜¥èŠ±ç§‹æœˆçš„ç¾å¥½æ™¯è±¡ã€‚</label>
                </div>
            </div>
        </div>
        
        <div class="separator"></div>
        
        <div class="question">
            <div class="question-number">4. æç…œå–„æ–¼é‹ç”¨å°æ¯”æ‰‹æ³•ä¾†çªå‡ºæƒ…æ„Ÿï¼Œè©¦å¾æœ¬è©ä¸­èˆ‰å‡ºä¸€å€‹å°æ¯”çš„ä¾‹å­ä¸¦èªªæ˜å…¶ä½œç”¨ã€‚<span class="points">ï¼ˆ2åˆ†ï¼‰</span></div>
            <div class="sub-question">
                ä¾‹å­ï¼š<input type="text" class="input-field" id="q4a" placeholder="è«‹èˆ‰å‡ºå°æ¯”çš„è©å¥" style="min-width: 300px;">
            </div>
            <div class="sub-question">
                ä½œç”¨ï¼š<input type="text" class="input-field" id="q4b" placeholder="è«‹èªªæ˜å°æ¯”çš„ä½œç”¨" style="min-width: 300px;">
            </div>
        </div>
        
        <div class="control-buttons">
            <button class="btn" onclick="checkAnswers()">æª¢æŸ¥ç­”æ¡ˆ</button>
            <button class="btn btn-secondary" onclick="resetForm()">é‡æ–°ä½œç­”</button>
            <button class="btn" onclick="showAnswers()" id="showAnswersBtn" disabled>é¡¯ç¤ºæ¨™æº–ç­”æ¡ˆ</button>
            <button class="btn" onclick="printResults()">æ‰“å°çµæœ</button>
        </div>
        
        <div id="feedback" class="feedback hidden"></div>
        
        <div id="resultSummary" class="result-summary hidden">
            <h3>ä½œç­”çµæœç¸½çµ</h3>
            <div id="detailedResults"></div>
        </div>
    </div>

    <script>
        // æ¨™æº–ç­”æ¡ˆ
        const answers = {
            q1a: ['æ“¬äºº', 'è¥¯æ‰˜'],
            q1b: ['æ˜å–»'],
            q1c: ['è¨­å•'],
            q2a1: ['æ˜¥èŠ±ç§‹æœˆä½•æ™‚äº†'],
            q2a2: ['å¾€äº‹çŸ¥å¤šå°‘'],
            q2b1: ['å°æ¨“æ˜¨å¤œåˆæ±é¢¨'],
            q2b2: ['åªæ˜¯æœ±é¡æ”¹'],
            q2c1: ['å•å›èƒ½æœ‰å¹¾å¤šæ„'],
            q2c2: ['æ°ä¼¼ä¸€æ±Ÿæ˜¥æ°´å‘æ±æµ'],
            q3: 'C',
            q4a: ['é›•é—Œç‰ç Œæ‡‰çŒ¶åœ¨ï¼Œåªæ˜¯æœ±é¡æ”¹'],
            q4b: ['é€šéå®®æ®¿ä¾èˆŠèˆ‡äººäº‹è®Šé·çš„å°æ¯”ï¼Œçªå‡ºç‰©æ˜¯äººéçš„æ‚²æ¶¼å’Œæ™‚å…‰æµé€çš„ç„¡æƒ…', 'ç‰©æ˜¯äººé', 'æ™‚å…‰æµé€', 'å°æ¯”']
        };

        // åˆ†æ•¸åˆ†é…
        const pointsMap = {
            q1a: 2, q1b: 2, q1c: 2,
            q2a1: 1, q2a2: 1, q2b1: 1, q2b2: 1, q2c1: 1, q2c2: 1,
            q3: 2,
            q4a: 1, q4b: 1
        };

        let hasChecked = false;

        function selectOption(questionName, value) {
            document.getElementById(questionName + value).checked = true;
            updateProgress();
        }

        function checkAnswer(inputId, answerArray, isExact = false) {
            const input = document.getElementById(inputId);
            const userAnswer = input.value.trim();
            
            if (!userAnswer) return false;
            
            if (isExact) {
                return answerArray.includes(userAnswer);
            } else {
                // æ¨¡ç³ŠåŒ¹é…ï¼Œæª¢æŸ¥æ˜¯å¦åŒ…å«é—œéµè©
                return answerArray.some(answer => 
                    userAnswer.includes(answer) || answer.includes(userAnswer)
                );
            }
        }

        function checkAnswers() {
            let score = 0;
            let totalQuestions = 0;
            let results = {};

            // æª¢æŸ¥æ‰€æœ‰ç­”æ¡ˆ
            for (let questionId of Object.keys(answers)) {
                totalQuestions++;
                const isCorrect = checkAnswer(questionId, answers[questionId]);
                results[questionId] = isCorrect;
                
                if (isCorrect) {
                    score += pointsMap[questionId];
                    document.getElementById(questionId).classList.add('correct');
                    document.getElementById(questionId).classList.remove('incorrect');
                } else {
                    document.getElementById(questionId).classList.add('incorrect');
                    document.getElementById(questionId).classList.remove('correct');
                }
            }

            // æª¢æŸ¥é¸æ“‡é¡Œ
            const q3Selected = document.querySelector('input[name="q3"]:checked');
            if (q3Selected && q3Selected.value === answers.q3) {
                score += pointsMap.q3;
                results.q3 = true;
                document.querySelector(`#q3${answers.q3}`).parentElement.classList.add('correct');
            } else if (q3Selected) {
                results.q3 = false;
                q3Selected.parentElement.classList.add('incorrect');
                document.querySelector(`#q3${answers.q3}`).parentElement.classList.add('correct');
            }

            // æ›´æ–°åˆ†æ•¸é¡¯ç¤º
            document.getElementById('currentScore').textContent = score;
            document.getElementById('progress').textContent = Math.round((score / 18) * 100);

            // é¡¯ç¤ºåé¥‹
            showFeedback(score);
            showDetailedResults(results, score);
            
            hasChecked = true;
            document.getElementById('showAnswersBtn').disabled = false;
        }

        function showFeedback(score) {
            const feedback = document.getElementById('feedback');
            const percentage = (score / 18) * 100;
            
            feedback.classList.remove('hidden', 'excellent', 'good', 'needs-improvement', 'poor');
            
            if (percentage >= 90) {
                feedback.classList.add('excellent');
                feedback.innerHTML = `ğŸ‰ å„ªç§€ï¼æ‚¨ç²å¾—äº† ${score}/18 åˆ†ï¼ˆ${percentage.toFixed(1)}%ï¼‰ã€‚æ‚¨å°å¤è©©è©çš„ç†è§£å¾ˆæ·±åˆ»ï¼`;
            } else if (percentage >= 75) {
                feedback.classList.add('good');
                feedback.innerHTML = `ğŸ‘ è‰¯å¥½ï¼æ‚¨ç²å¾—äº† ${score}/18 åˆ†ï¼ˆ${percentage.toFixed(1)}%ï¼‰ã€‚ç¹¼çºŒåŠ æ²¹ï¼Œæ‚¨å·²ç¶“æŒæ¡äº†å¤§éƒ¨åˆ†å…§å®¹ï¼`;
            } else if (percentage >= 60) {
                feedback.classList.add('needs-improvement');
                feedback.innerHTML = `ğŸ“š éœ€è¦æ”¹é€²ã€‚æ‚¨ç²å¾—äº† ${score}/18 åˆ†ï¼ˆ${percentage.toFixed(1)}%ï¼‰ã€‚å»ºè­°é‡æ–°é–±è®€è©©è©ï¼Œç†è§£å…¶æ·±å±¤å«ç¾©ã€‚`;
            } else {
                feedback.classList.add('poor');
                feedback.innerHTML = `ğŸ’ª ç¹¼çºŒåŠªåŠ›ï¼æ‚¨ç²å¾—äº† ${score}/18 åˆ†ï¼ˆ${percentage.toFixed(1)}%ï¼‰ã€‚å»ºè­°å¤šè®€å¤šç·´ï¼ŒåŠ æ·±å°å¤è©©è©ä¿®è¾­æ‰‹æ³•çš„ç†è§£ã€‚`;
            }
        }

        function showDetailedResults(results, score) {
            const resultDiv = document.getElementById('detailedResults');
            const summary = document.getElementById('resultSummary');
            
            let html = `
                <p><strong>å­¸ç”Ÿè³‡è¨Šï¼š</strong></p>
                <ul>
                    <li>å§“åï¼š${document.getElementById('studentName').value || 'æœªå¡«å¯«'}</li>
                    <li>ç­ç´šï¼š${document.getElementById('studentClass').value || 'æœªå¡«å¯«'}</li>
                    <li>å­¸è™Ÿï¼š${document.getElementById('studentId').value || 'æœªå¡«å¯«'}</li>
                    <li>å®Œæˆæ™‚é–“ï¼š${new Date().toLocaleString('zh-TW')}</li>
                </ul>
                
                <p><strong>å„é¡Œå¾—åˆ†æƒ…æ³ï¼š</strong></p>
                <ul>
                    <li>ç¬¬1é¡Œï¼ˆä¿®è¾­æ‰‹æ³•ï¼‰ï¼š${(results.q1a ? 2 : 0) + (results.q1b ? 2 : 0) + (results.q1c ? 2 : 0)}/6åˆ†</li>
                    <li>ç¬¬2é¡Œï¼ˆçµæ§‹åˆ†æï¼‰ï¼š${(results.q2a1 ? 1 : 0) + (results.q2a2 ? 1 : 0) + (results.q2b1 ? 1 : 0) + (results.q2b2 ? 1 : 0) + (results.q2c1 ? 1 : 0) + (results.q2c2 ? 1 : 0)}/6åˆ†</li>
                    <li>ç¬¬3é¡Œï¼ˆä¸»æ—¨ç†è§£ï¼‰ï¼š${results.q3 ? 2 : 0}/2åˆ†</li>
                    <li>ç¬¬4é¡Œï¼ˆå°æ¯”æ‰‹æ³•ï¼‰ï¼š${(results.q4a ? 1 : 0) + (results.q4b ? 1 : 0)}/2åˆ†</li>
                </ul>
                
                <p><strong>ç¸½åˆ†ï¼š${score}/18åˆ†ï¼ˆ${((score/18)*100).toFixed(1)}%ï¼‰</strong></p>
            `;
            
            resultDiv.innerHTML = html;
            summary.classList.remove('hidden');
        }

        function showAnswers() {
            if (!hasChecked) {
                alert('è«‹å…ˆæª¢æŸ¥ç­”æ¡ˆï¼');
                return;
            }
            
            // é¡¯ç¤ºæ‰€æœ‰æ¨™æº–ç­”æ¡ˆ
            document.getElementById('q1a').value = answers.q1a[0];
            document.getElementById('q1b').value = answers.q1b[0];
            document.getElementById('q1c').value = answers.q1c[0];
            
            document.getElementById('q2a1').value = answers.q2a1[0];
            document.getElementById('q2a2').value = answers.q2a2[0];
            document.getElementById('q2b1').value = answers.q2b1[0];
            document.getElementById('q2b2').value = answers.q2b2[0];
            document.getElementById('q2c1').value = answers.q2c1[0];
            document.getElementById('q2c2').value = answers.q2c2[0];
            
            document.getElementById('q3C').checked = true;
            
            document.getElementById('q4a').value = answers.q4a[0];
            document.getElementById('q4b').value = answers.q4b[0];
        }

        function resetForm() {
            // æ¸…é™¤æ‰€æœ‰è¼¸å…¥
            document.querySelectorAll('.input-field').forEach(input => {
                input.value = '';
                input.classList.remove('correct', 'incorrect');
            });
            
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
                radio.parentElement.classList.remove('correct', 'incorrect');
            });
            
            // é‡ç½®é¡¯ç¤º
            document.getElementById('currentScore').textContent = '0';
            document.getElementById('progress').textContent = '0';
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('resultSummary').classList.add('hidden');
            
            hasChecked = false;
            document.getElementById('showAnswersBtn').disabled = true;
        }

        function updateProgress() {
            // è¨ˆç®—å®Œæˆé€²åº¦
            let completed = 0;
            let total = 0;
            
            document.querySelectorAll('.input-field').forEach(input => {
                total++;
                if (input.value.trim()) completed++;
            });
            
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                if (radio.name === 'q3') {
                    if (!total || radio.name !== document.querySelector('input[type="radio"]:checked')?.name) {
                        total = total || 1;
                    }
                    if (radio.checked) completed = Math.max(completed, 1);
                }
            });
            
            const progress = total > 0 ? Math.round((completed / total) * 100) : 0;
            document.getElementById('progress').textContent = progress;
        }

        function printResults() {
            window.print();
        }

        // è‡ªå‹•æ›´æ–°é€²åº¦
        document.addEventListener('input', updateProgress);
        document.addEventListener('change', updateProgress);

        // é˜²æ­¢é é¢åˆ·æ–°æ™‚ä¸Ÿå¤±æ•¸æ“š
        window.addEventListener('beforeunload', function(e) {
            const hasContent = document.querySelector('.input-field[value]') || 
                              document.querySelector('input[type="radio"]:checked');
            if (hasContent) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>