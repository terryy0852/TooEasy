{% extends "base.html" %}

{% block title %}{{ _('学生仪表盘 - 作业管理系统') }}{% endblock %}

{% block content %}
    <h2 style="margin-bottom: 1.5rem; color: var(--primary-color);">{{ _('可用作业') }}</h2>
    
    {% if assignments %}
        <div class="assignments-grid">
            {% for assignment in assignments %}
                <div class="card">
                    <div class="flex justify-between align-center mb-1">
                        <h3 style="color: var(--primary-color);">{{ assignment.title }}</h3>
                        {% if assignment.id in submitted_assignment_ids %}
                            <span style="background-color: var(--secondary-color); color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">
                                {{ _('已提交') }}
                            </span>
                        {% endif %}
                    </div>
                    
                    <p style="margin-bottom: 1rem; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
                        {{ assignment.description }}
                    </p>
                    
                    <div class="flex justify-between align-center">
                        <div>
                            <span style="color: #666; font-size: 0.875rem;">
                                {{ _('发布者') }}: {{ assignment.creator.username }}
                            </span>
                            {% if assignment.due_date %}
                                <span style="color: #666; font-size: 0.875rem; margin-left: 1rem;">
                                    {{ _('截止日期') }}: {{ assignment.due_date.strftime('%Y-%m-%d') }}
                                </span>
                            {% endif %}
                        </div>
                        
                        <a href="{% if assignment.id in submitted_assignment_ids %}{{ url_for('view_assignment', assignment_id=assignment.id) }}{% else %}{{ url_for('interactive_assignment', assignment_id=assignment.id) }}{% endif %}" 
                           {% if not (assignment.id in submitted_assignment_ids) %}target="_blank"{% endif %} 
                           class="btn btn-primary" style="font-size: 0.875rem;">
                            {% if assignment.id in submitted_assignment_ids %}
                                {{ _('查看详情') }}
                            {% else %}
                                {{ _('开始作业') }}
                            {% endif %}
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 3rem; background-color: #f9f9f9; border-radius: var(--border-radius);">
            <p style="color: #666;">{{ _('当前没有可用的作业') }}</p>
        </div>
    {% endif %}
{% endblock %}