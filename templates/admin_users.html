{% extends "base.html" %}

{% block title %}{{ _('User Management') }}{% endblock %}

{% block content %}
<h1>{{ _('User Management') }}</h1>

<div class="admin-dashboard">
    <div class="dashboard-header">
        <h2>{{ _('Welcome,') }} {{ current_user.username }}!</h2>
        <div class="user-info">
            <span>{{ _('Role:') }} {{ current_user.role }}</span>
            <a href="{{ url_for('logout') }}">{{ _('Logout') }}</a>
        </div>
    </div>

    <div class="users-table-container">
        <h3>{{ _('All Users') }}</h3>
        <table class="users-table">
            <thead>
                <tr>
                    <th>{{ _('ID') }}</th>
                    <th>{{ _('Username') }}</th>
                    <th>{{ _('Email') }}</th>
                    <th>{{ _('Role') }}</th>
                    <th>{{ _('Actions') }}</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.username }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.role }}</td>
                    <td>
                        <div class="actions">
                            <a href="{{ url_for('admin_edit_user', user_id=user.id) }}" class="edit-btn">
                                {{ _('Edit') }}
                            </a>
                            <form method="POST" action="{{ url_for('admin_delete_user', user_id=user.id) }}">
                                <button type="submit" class="delete-btn" onclick="return confirm('Are you sure you want to delete this user?');">
                                    {{ _('Delete') }}
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="admin-section">
        <a href="{{ url_for('student_dashboard') }}" class="back-btn">
            {{ _('Back to Dashboard') }}
        </a>
    </div>
</div>

<style>
.admin-dashboard {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}

.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding: 15px;
    background-color: #f5f5f5;
    border-radius: 8px;
}

.user-info {
    display: flex;
    gap: 15px;
}

.users-table-container {
    margin: 30px 0;
}

.users-table {
    width: 100%;
    border-collapse: collapse;
    background-color: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    border-radius: 8px;
    overflow: hidden;
}

.users-table th,
.users-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

.users-table th {
    background-color: #4CAF50;
    color: white;
    font-weight: bold;
}

.users-table tr:hover {
    background-color: #f5f5f5;
}

.actions {
    display: flex;
    gap: 8px;
}

.edit-btn, .delete-btn, .back-btn {
    padding: 6px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    text-decoration: none;
    display: inline-block;
    transition: background-color 0.3s;
}

.edit-btn {
    background-color: #2196F3;
    color: white;
}

.edit-btn:hover {
    background-color: #0b7dda;
}

.delete-btn {
    background-color: #f44336;
    color: white;
}

.delete-btn:hover {
    background-color: #da190b;
}

.back-btn {
    background-color: #9E9E9E;
    color: white;
}

.back-btn:hover {
    background-color: #757575;
}
</style>
{% endblock %}